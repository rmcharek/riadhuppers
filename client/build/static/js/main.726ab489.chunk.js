(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{79:function(e,t,n){},81:function(e,t,n){},91:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(8),s=n.n(a),i=(n(78),n(79),n(19)),u=n.n(i),o=n(24),j=n(18),l=(n(81),n(34)),b=n(7),O=n(128),p=n(132),d=n(136),h=n(135),f=n(130),x=n(133),m=n(134),g=n(99),v=n(3),y=Object(O.a)({table:{minWidth:650}});var k=Object(b.h)((function(e){var t=e.products,n=(e.match,Object(r.useState)({open:!1,id:0})),c=Object(j.a)(n,2),a=(c[0],c[1],Object(r.useState)("")),s=Object(j.a)(a,2),i=(s[0],s[1],Object(r.useState)({orderBy:"name",order:"asc"})),u=Object(j.a)(i,2),o=(u[0],u[1],Object(b.g)(),y());return Object(v.jsx)(f.a,{component:g.a,children:Object(v.jsxs)(p.a,{className:o.table,"aria-label":"simple table",children:[Object(v.jsx)(x.a,{children:Object(v.jsxs)(m.a,{children:[Object(v.jsx)(h.a,{children:"ID"}),Object(v.jsx)(h.a,{align:"right",children:"Name "}),Object(v.jsx)(h.a,{align:"right",children:"Description"}),Object(v.jsx)(h.a,{align:"right",children:"Price"}),Object(v.jsx)(h.a,{align:"right",children:"Key"})]})}),Object(v.jsx)(d.a,{children:t.map((function(e){return Object(v.jsxs)(m.a,{children:[Object(v.jsx)(h.a,{component:"th",scope:"row",children:e.id}),Object(v.jsx)(h.a,{align:"right",children:e.name}),Object(v.jsx)(h.a,{align:"right",children:e.description}),Object(v.jsx)(h.a,{align:"right",children:e.price}),Object(v.jsx)(h.a,{align:"right",children:e.key})]},e.name)}))})]})})})),w=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/product",{headers:{Accept:"application/json",Authorization:"Bearer "+t.trim(),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){n=e.products,console.log(e)}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var S=Object(b.h)((function(e){e.match,e.history;var t=Object(r.useState)([]),n=Object(j.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){function e(){return(e=Object(o.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token_param"),e.next=3,w(t);case 3:n=e.sent,a(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(k,{products:c})})})),C=function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:t,password:n},e.next=3,fetch("/login",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)});case 3:if(401!=(c=e.sent).status){e.next=8;break}return e.abrupt("return",401);case 8:return e.next=10,c.json();case 10:return a=e.sent,localStorage.setItem("token_param",B(a.token)),e.abrupt("return",1);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function B(e){return"string"!=typeof e&&(e=JSON.stringify(e)),e}var N=n(61),L=n.n(N);n(91);function P(e){var t=e.error,n=e.onLogin,c=Object(r.useRef)(null),a=Object(r.useRef)(null),s=Object(r.useState)(""),i=Object(j.a)(s,2),u=i[0],o=i[1];Object(r.useEffect)((function(){c.current.focus()}));var l=Object(r.useCallback)((function(e){e.preventDefault();var t="Bitte Benutzernamen und Passwort angeben.";c.current.value&&c.current.value&&(t="",n(c.current.value,a.current.value)),o((function(e){return L()(e,{$set:t})}))}),[]);return Object(v.jsxs)("form",{onSubmit:l,className:"login",children:[(""!==t||""!==u)&&Object(v.jsxs)("div",{className:"error",children:[t," ",u]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{htmlFor:"",children:"Benutzername:"}),Object(v.jsx)("input",{type:"text",id:"username",ref:c})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{htmlFor:"",children:"Passwort:"}),Object(v.jsx)("input",{type:"password",id:"password",ref:a})]}),Object(v.jsx)("button",{type:"submit",children:"anmelden"})]})}var E,I=n(138),J=n(139),T=n(140),z=n(141),D=n(67),F=n.n(D),A=n(68),M=n.n(A),R=n(62),_=n(63),K=n(137),W=Object(_.a)(K.a)(E||(E=Object(R.a)(["\n  &&& {\n    display: flex;\n    justify-content: space-between;\n  }\n"])));var $=Object(b.h)((function(e){var t=e.history,n=e.onLogout,a=c.a.useState(null),s=Object(j.a)(a,2),i=s[0],u=s[1],o=Object(r.useCallback)((function(){n(),t.push("/")}),[n]),b=Object(r.useCallback)((function(e){return u(e.currentTarget)}),[u]),O=Object(r.useCallback)((function(){return u(null)}),[u]);return Object(v.jsx)(I.a,{children:Object(v.jsxs)(W,{children:[Object(v.jsx)(J.a,{edge:"start",color:"inherit","aria-label":"Menu",onClick:b,children:Object(v.jsx)(F.a,{})}),Object(v.jsx)(T.a,{id:"navigation-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:O,children:Object(v.jsx)(z.a,{onClick:O,children:Object(v.jsx)(l.b,{to:"/products/products",children:"Products"})})}),Object(v.jsx)(J.a,{edge:"end",color:"inherit","aria-label":"Logout",onClick:o,children:Object(v.jsx)(M.a,{})})]})})}));function q(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(r.useCallback)(function(){var e=Object(o.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t,n);case 2:1==e.sent&&(n="password",c("user"===(t="user")&&"password"===n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),s=Object(r.useCallback)((function(){return c(!1)}),[]);return Object(v.jsxs)(l.a,{children:[n&&Object(v.jsx)($,{onLogout:s}),Object(v.jsxs)(b.d,{children:[Object(v.jsx)(b.b,{path:"/",exact:!0,render:function(){return n?Object(v.jsx)(b.a,{to:"/game"}):Object(v.jsx)(P,{onLogin:a,error:""})}}),Object(v.jsx)(b.b,{path:"/products/products",children:function(){return n?Object(v.jsx)(S,{}):Object(v.jsx)(b.a,{to:"/"})}})]})]})}s.a.render(Object(v.jsx)(q,{}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.726ab489.chunk.js.map